"use strict";(self.webpackChunkproject_managment_app=self.webpackChunkproject_managment_app||[]).push([[972],{4972:function(n,e,t){t.r(e),t.d(e,{default:function(){return q}});var r=t(1413),a=t(3433),c=t(4165),o=t(5861),s=t(9439),i=t(2791),l=t(7689),d=t(5206),u={wrapper:"board_wrapper__Sz3zA",addButton:"board_addButton__Ds+sB",title:"board_title__WYCDt",description:"board_description__fQetx",mainContent:"board_mainContent__j9sVR",columnsWrapper:"board_columnsWrapper__9goGF",columnsList:"board_columnsList__fBdaG",icon:"board_icon__ZlxJc"},_=t(6579),m=t(946),p=t(5579),f=t(5115),h=t(7927),b=t(3168),x=t(5290),C="column_addButton__ThOBk",E="column_columnTitle__Xg5qL",N="column_form__VVDCM",g="column_formError__6apFY",T="column_input__DSnnH",j="column_error__HUYjh",k="column_columnItem__KGws6",I="column_titleName__AagAk",A="column_tasksList__yXUy-",D="column_taskButton__4XVwe",L="column_icon__RBY+l",Z="column_columnLine__luRLd",O="column_button__MU7iD",R="column_buttonEdit__rPGEz",v="column_submit__B65hc",B=t(7851),M=t(4794),U="task_taskItem__jR-8n",y="task_taskTitle__0mhj-",S="task_colorBadge__m9c3x",F="task_taskText__6qW3V",w=t(184),P=function(n){var e=n.taskData,t=n.columnId,a=n.index,c=(0,_.T)(),o=function(){c((0,h.wq)(e)),c((0,h.FC)(t)),c((0,h.dk)())};return(0,w.jsx)(M._l,{draggableId:e._id,index:a,children:function(n,t){var a=(0,r.Z)({boxShadow:t.isDragging?"0 0.3rem 1.6rem 0.1rem var(--card-hover)":"none",background:t.isDragging?"#ffffffd1":"white"},n.draggableProps.style);return(0,w.jsx)("li",(0,r.Z)((0,r.Z)({className:U,onClick:o,ref:n.innerRef},n.draggableProps),{},{style:a,children:(0,w.jsxs)("div",(0,r.Z)((0,r.Z)({className:y},n.dragHandleProps),{},{children:[(0,w.jsx)("div",{className:S,style:{background:e.description.color}}),(0,w.jsx)("div",{className:F,children:e.title})]}))}))}})},z=function(n){var e=(0,_.C)((function(n){return n.board})).tasks,t=n.columnData,a=e[t._id],c=(0,_.T)(),o=(0,b.$)().t,l=(0,i.useState)(!1),d=(0,s.Z)(l,2),u=d[0],p=d[1],U=(0,x.cI)({mode:"onChange"}),y=U.register,S=U.handleSubmit,F=U.formState.errors,z=U.reset,K=(0,i.useRef)(null),V=(0,i.useRef)(null);(0,i.useEffect)((function(){c((0,B.hD)({boardId:t.boardId,columnId:t._id}))}),[c,t.boardId,t._id]);var G=function(n){c((0,m.Di)({boardId:t.boardId,columnId:t._id,order:t.order,title:n.input})).then((function(){return p(!1)}))},q=function(){c((0,h.FC)(t._id)),c((0,h.VN)({message:"".concat(o("MODAL.DELETE_MSG")," ").concat(t.title,"?"),color:h.m0.RED,btnText:"".concat(o("MODAL.DELETE")),action:h.Nh.COLUMN_DELETE}))},H=function(){var n=a.length?a[a.length-1].order+1:0;c((0,h.FC)(t._id)),c((0,h.VN)({title:"".concat(o("BOARD.CREATE_TASK_TITLE")),inputTitle:"".concat(o("MODAL.TITLE")),inputDescr:"".concat(o("MODAL.DESCRIPTION")),color:h.m0.BLUE,btnText:"".concat(o("MODAL.CREATE")),action:h.Nh.TASK_CREATE})),c((0,h.Ai)(n))},W=function(){z(),p(!1)};return(0,w.jsx)(M._l,{draggableId:t._id,index:n.index,children:function(n,e){var c=(0,r.Z)({backgroundColor:e.isDragging?"#0047ff26":"#0047ff14"},n.draggableProps.style);return(0,w.jsxs)("li",(0,r.Z)((0,r.Z)((0,r.Z)({"data-key":t._id,className:k,ref:n.innerRef},n.draggableProps),n.dragHandleProps),{},{style:c,children:[u?(0,w.jsxs)("form",{ref:K,className:N,onSubmit:S(G),children:[(0,w.jsx)("input",(0,r.Z)((0,r.Z)({autoFocus:!0,type:"text"},y("input",{value:t.title,required:"REQ_ER",maxLength:{value:25,message:"MAX_ER"}})),{},{className:"".concat(T," ").concat(F.input?j:""),onBlur:S(G)})),(0,w.jsx)("button",{className:"".concat(R," ").concat(v),type:"submit",disabled:!(0===Object.keys(F).length),children:(0,w.jsx)(f.Z,{color:"#0047FF",size:100,icon:"done",className:L})}),(0,w.jsx)("button",{className:R,onClick:W,children:(0,w.jsx)(f.Z,{color:"#CC0707",size:100,icon:"cancel",className:L})}),(0,w.jsx)("span",{className:g,children:F.input&&o("COLUMN.".concat(F.input.message))})]}):(0,w.jsxs)("div",(0,r.Z)((0,r.Z)({ref:V,className:E},n.dragHandleProps),{},{children:[(0,w.jsx)("div",{className:I,onClick:function(){return p(!0)},children:t.title}),(0,w.jsx)("button",{className:O,onClick:q,children:(0,w.jsx)(f.Z,{color:"#CC0707",size:100,icon:"trash",className:L})})]})),(0,w.jsx)("hr",{className:Z}),(0,w.jsx)(M.bK,{droppableId:t._id,mode:"standard",type:"TASK",children:function(n){return(0,w.jsxs)("ul",(0,r.Z)((0,r.Z)({className:A},n.droppableProps),{},{ref:n.innerRef,children:[a&&a.map((function(n,e){return(0,w.jsx)(P,{taskData:n,columnId:t._id,index:e},n._id)})),n.placeholder]}))}}),(0,w.jsxs)("div",{className:"".concat(D," ").concat(C),onClick:H,children:[o("BOARD.CREATE_TASK_BUTTON"),(0,w.jsx)(f.Z,{color:"#0047FF",size:100,icon:"add",className:L})]})]}))}})},K=t(9085),V=(t(5462),t(4361)),G=t(2221),q=function(){var n=(0,_.C)((function(n){return n.board})),e=n.title,t=n.error,x=n.columns,C=n.tasks,E=(0,_.C)((function(n){return n.modal})),N=E.modalAction,g=E.userInputTitle,T=E.userInputDescr,j=E.taskId,k=E.taskOrder,I=(0,_.T)(),A=(0,l.UO)().id,D=(0,l.s0)(),L=(0,_.C)(h._P),Z=(0,b.$)().t,O=(0,_.C)(p.np);(0,i.useEffect)((function(){return I((0,d.MO)("".concat(A))),function(){I((0,d.Jo)())}}),[A,I]),(0,i.useEffect)((function(){if(t){var n=t.split("/"),e=(0,s.Z)(n,2),r=e[0],a=e[1],c=r;r&&("403"===r&&(I((0,p.QV)(!1)),I((0,h.GG)()),I((0,h.lZ)())),"Board was not founded!"===a&&(D(G.Z.boards,{replace:!0}),c=r+"_BOARD"),K.Am.error(Z((0,V.T)(c))),I((0,d.zA)()))}return function(){I((0,d.zA)())}}),[t,I,D,Z]),(0,i.useEffect)((function(){if(N===h.Nh.COLUMN_DELETE&&(I((0,m.av)({boardId:"".concat(A),columnId:L})),I((0,h.nC)())),N===h.Nh.TASK_CREATE){var n=JSON.stringify({description:T,color:""});I((0,B.ct)({boardId:"".concat(A),columnId:L,title:g,description:n,order:k,userId:O._id})),I((0,h.nC)())}N===h.Nh.COLUMN_CREATE&&(I((0,m.dI)({boardId:"".concat(A),title:g,order:x.length?x[x.length-1].order+1:0})),I((0,h.nC)())),N===h.Nh.TASK_DELETE&&j&&(I((0,B.Nq)({boardId:"".concat(A),columnId:L,taskId:j._id})),I((0,h.nC)()))}),[N,x,I,A,g,O,T,L,j,k]);var R=(0,i.useCallback)(function(){var n=(0,o.Z)((0,c.Z)().mark((function n(e){var t,r,a;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.destination,r=e.source,a=e.type,t&&(t.index!==r.index||t.droppableId!==r.droppableId)){n.next=3;break}return n.abrupt("return");case 3:if("COLUMN"!==a){n.next=8;break}return n.next=6,I((0,m.fC)({result:e,columns:x,id:A}));case 6:n.next=9;break;case 8:I((0,B.$C)({result:e,tasks:C}));case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[I,A,x,C]);return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("section",{className:u.wrapper,children:(0,w.jsxs)("div",{className:u.mainContent,children:[(0,w.jsx)("h2",{className:u.title,children:(0,w.jsxs)(w.Fragment,{children:[e.title," ",""!==e.descr&&(0,w.jsxs)("span",{className:u.description,children:["(",e.descr,")"]})]})}),(0,w.jsxs)("div",{className:u.columnsWrapper,children:[x.length>0&&(0,w.jsx)(M.Z5,{onDragEnd:R,children:(0,w.jsx)(M.bK,{droppableId:"boardId",direction:"horizontal",mode:"standard",type:"COLUMN",children:function(n){return(0,w.jsxs)("ul",(0,r.Z)((0,r.Z)({className:u.columnsList,ref:n.innerRef},n.droppableProps),{},{children:[(0,a.Z)(x).map((function(n,e){return(0,w.jsx)(z,{columnData:n,index:e},n._id)})),n.placeholder]}))}})}),(0,w.jsxs)("div",{className:"".concat(u.columnButton," ").concat(u.addButton),onClick:function(){I((0,h.VN)({title:"".concat(Z("BOARD.CREATE_COLUMN_TITLE")),inputTitle:"".concat(Z("MODAL.TITLE")),color:h.m0.BLUE,btnText:"".concat(Z("MODAL.CREATE")),action:h.Nh.COLUMN_CREATE}))},children:[Z("BOARD.CREATE_COLUMN_BUTTON"),(0,w.jsx)(f.Z,{color:"#0047FF",size:100,icon:"add",className:u.icon})]})]})]})})})}}}]);
//# sourceMappingURL=972.c87af843.chunk.js.map