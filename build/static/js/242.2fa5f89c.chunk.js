"use strict";(self.webpackChunkproject_managment_app=self.webpackChunkproject_managment_app||[]).push([[242],{5166:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var s=n(1413),r=n(5987),a=n(4165),i=n(5861),c=n(9439),o=n(2791),l=n(5579),u=n(6579),m=n(5290),p=n(3168),d=n(5115),E=n.p+"static/media/settings.48db334358ce15d61a69.png",_=n(9244),g=n(9932),f=n(7927),h=n(9085),v=n(2551),N=n(528),T=n(736),S={wrapper:"settings_wrapper__Klffn",btnCancelSave:"settings_btnCancelSave__6Gta9",rightBlock:"settings_rightBlock__gMiie",buttonBlockRight:"settings_buttonBlockRight__YzTc9",btnDelete:"settings_btnDelete__t9NgQ",btnSave:"settings_btnSave__LknDn",formSettings:"settings_formSettings__FLKG4",formItem:"settings_formItem__OvJM2",fieldError:"settings_fieldError__9Nx5O",settings:"settings_settings__Nz+By",leftBlock:"settings_leftBlock__qtOUq",wrapperEye:"settings_wrapperEye__WmPoi",button:"settings_button__-STES",imageBlock:"settings_imageBlock__j3iej",buttonBlock:"settings_buttonBlock__+S+gp",testWrapper:"settings_testWrapper__5p+EK"},b=n(184),x=["ref"],A=function(){var e=(0,p.$)().t,t=(0,u.T)(),n=(0,u.C)(l.aF).user,A=(0,o.useRef)(null),k=(0,o.useState)(!1),L=(0,c.Z)(k,2),j=L[0],w=L[1],D=(0,u.C)(f.T_).modalAction,R=(0,o.useState)(!1),C=(0,c.Z)(R,2),O=C[0],I=C[1],U=(0,m.cI)({reValidateMode:"onSubmit",defaultValues:{name:"",login:"",password:""}}),Z=U.register,B=U.getValues,G=U.trigger,H=U.clearErrors,y=U.setValue,P=U.reset,F=U.formState.errors;(0,o.useEffect)((function(){y("name",n.name),y("login",n.login)}),[n.name,n.login,y]);var M=function(){var n=(0,i.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(O){n.next=4;break}t((0,f.VN)({message:e("SETTINGS.EDIT_MODAL_TEXT"),color:f.m0.BLUE,btnText:e("MODAL.OK"),action:f.Nh.EDIT_USER_PROFILE})),n.next=8;break;case 4:return n.next=6,G();case 6:n.sent&&t((0,f.VN)({message:e("SETTINGS.SAVE_MODAL_TEXT"),color:f.m0.BLUE,btnText:e("MODAL.SAVE"),action:f.Nh.SAVE_USER_PROFILE}));case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,o.useEffect)((function(){var n=(0,g.OY)(),s=(0,_.a)(n).id;switch(D){case f.Nh.EDIT_USER_PROFILE:I(!0),t((0,f.nC)());break;case f.Nh.SAVE_USER_PROFILE:t((0,f.nC)());var r=B(),c=Object.assign(r,{_id:s});t((0,v.qf)(!0));var o=function(){var s=(0,i.Z)((0,a.Z)().mark((function s(){var r,i,o;return(0,a.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,t((0,l.f6)({user:c,token:n})).unwrap();case 3:return r=s.sent,I(!1),s.next=7,t((0,l.Wf)(r)).unwrap();case 7:return i=s.sent,s.next=10,t((0,l.FN)(i)).unwrap();case 10:h.Am.success(e("AUTH.200_USER_UPDATE")),s.next=17;break;case 13:s.prev=13,s.t0=s.catch(0),o=(0,N.e)(s.t0),h.Am.error(e((0,T.b)(o)));case 17:return s.prev=17,t((0,v.qf)(!1)),s.finish(17);case 20:case"end":return s.stop()}}),s,null,[[0,13,17,20]])})));return function(){return s.apply(this,arguments)}}();o();break;case f.Nh.DELETE_USER_PROFILE:I(!1),t((0,f.nC)());var u=function(){var r=(0,i.Z)((0,a.Z)().mark((function r(){var i;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,t((0,l.Hd)({id:s,token:n})).unwrap();case 3:h.Am.success(e("AUTH.200_USER_DELETE")),r.next=10;break;case 6:r.prev=6,r.t0=r.catch(0),i=(0,N.e)(r.t0),h.Am.error(e((0,T.b)(i)));case 10:return r.prev=10,t((0,v.qf)(!1)),r.finish(10);case 13:case"end":return r.stop()}}),r,null,[[0,6,10,13]])})));return function(){return r.apply(this,arguments)}}();u()}}),[t,D]);var V=Z("password",{required:{value:!0,message:"PASSWORD_LENGTH"},pattern:{value:/^\S[a-zA-Z0-9_]+$/i,message:"PATTERN"},minLength:{value:6,message:"PASSWORD_LENGTH"},onChange:function(e){return H(e.target.name)}}),q=V.ref,z=(0,r.Z)(V,x),W=function(){null!==A&&void 0!==A&&A.current&&("text"===(null===A||void 0===A?void 0:A.current.getAttribute("type"))?(w(!1),(null===A||void 0===A?void 0:A.current).setAttribute("type","password")):(w(!0),(null===A||void 0===A?void 0:A.current).setAttribute("type","text")))};return(0,b.jsx)("section",{className:S.wrapper,children:(0,b.jsxs)("div",{className:S.settings,children:[(0,b.jsxs)("div",{className:S.leftBlock,children:[(0,b.jsx)("h1",{children:e("AUTH.USER_SETTINGS")}),(0,b.jsxs)("form",{className:S.formSettings,children:[(0,b.jsxs)("div",{className:S.formItem,children:[(0,b.jsx)("label",{htmlFor:"name",children:e("AUTH.NAME")}),(0,b.jsx)("input",(0,s.Z)((0,s.Z)({id:"name"},Z("name",{required:{value:!0,message:"LENGTH"},pattern:{value:/^\S[a-zA-Z0-9_]+$/i,message:"PATTERN"},minLength:{value:4,message:"LENGTH"},onChange:function(e){return H(e.target.name)}})),{},{className:F.name&&S.inputError,autoComplete:"off",disabled:!O})),F.name&&(0,b.jsx)("span",{className:S.fieldError,children:e("AUTH.".concat(F.name.message))})]}),(0,b.jsxs)("div",{className:S.formItem,children:[(0,b.jsx)("label",{htmlFor:"login",children:e("AUTH.LOGIN")}),(0,b.jsx)("input",(0,s.Z)((0,s.Z)({id:"login"},Z("login",{required:{value:!0,message:"LENGTH"},pattern:{value:/^\S[a-zA-Z0-9_]+$/i,message:"PATTERN"},minLength:{value:4,message:"LENGTH"},onChange:function(e){return H(e.target.name)}})),{},{className:F.login&&S.inputError,autoComplete:"off",disabled:!O})),F.login&&(0,b.jsx)("span",{className:S.fieldError,children:e("AUTH.".concat(F.login.message))})]}),(0,b.jsxs)("div",{className:S.formItem,children:[(0,b.jsx)("label",{htmlFor:"password",children:e("AUTH.PASSWORD")}),(0,b.jsxs)("div",{className:S.wrapperEye,children:[(0,b.jsx)("input",(0,s.Z)((0,s.Z)({id:"password",type:"password"},z),{},{name:"password",ref:function(e){q(e),A.current=e},className:F.password&&S.inputError,autoComplete:"off",disabled:!O,placeholder:"******"})),j?(0,b.jsx)("button",{type:"button",className:S.button,onClick:function(e){return W()},children:(0,b.jsx)(d.Z,{icon:"eye-slashed",size:"24",color:"#9a9a9a"})}):(0,b.jsx)("button",{type:"button",className:S.button,onClick:function(e){return W()},children:(0,b.jsx)(d.Z,{icon:"eye-open",size:"24",color:"#9a9a9a"})})]}),F.password&&(0,b.jsx)("span",{className:S.fieldError,children:e("AUTH.".concat(F.password.message))})]})]}),(0,b.jsxs)("div",{className:S.buttonBlock,children:[(0,b.jsx)("button",{className:S.btnSave,onClick:M,children:e(O?"SETTINGS.SAVE_CHANGES":"SETTINGS.EDIT")}),O?(0,b.jsx)("button",{className:S.btnCancelSave,onClick:function(){I(!1),P(),y("name",n.name),y("login",n.login)},children:e("MODAL.CANCEL")}):null]})]}),(0,b.jsxs)("div",{className:S.rightBlock,children:[(0,b.jsx)("div",{className:S.buttonBlockRight,children:(0,b.jsx)("button",{className:S.btnDelete,onClick:function(){t((0,f.VN)({message:"".concat(e("MODAL.DELETE_MSG")," ").concat(e("MODAL.PROFILE")),color:f.m0.RED,btnText:e("MODAL.DELETE"),action:f.Nh.DELETE_USER_PROFILE}))},children:e("SETTINGS.DELETE_ACCOUNT")})}),(0,b.jsx)("div",{className:S.imageBlock,children:(0,b.jsx)("img",{src:E,alt:"space discovery"})})]})]})})}}}]);
//# sourceMappingURL=242.2fa5f89c.chunk.js.map